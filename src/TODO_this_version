--------------------------------------------------
--------------top bar menu----------


-menus de topbar en diferentes idiomas: alguna manera de poder reducir el texto sin tener que reducir del todo...
Para evitar tener un ZX Desktop muy grande al poner en Español o Catalán

----------Fin top bar menu----------
----------------------------------------


-Agregar ¿todas? las entradas de menus de indexación, llamando a menu_add_item_menu_index_full_path, ejemplo:
        menu_add_item_menu_index_full_path(array_menu_settings_debug,
            "Main Menu-> Settings-> Debug","Menú Principal-> Opciones-> Debug","Menú Principal-> Opcions-> Debug");
Los menus que no usen menu_add_item_menu_index_full_path se les genera automáticamente, si se han abierto desde Main Menu se le agrega ese prefijo,
pero otros que vienen por ejemplo desde Top Menu o desde Top Buttons pues no

-Juego de la vida que tenga ayuda con las reglas del juego. O ya lo tiene?


-Si conmuto de un CPU step a ventana abierta de hexedit, ejecutará alguna instrucción sin querer?
Y teniendo el stop emulation on menú? Se ejecuta alguna instrucción sin querer?


-algun tipo de build que no sea ni linux ni mac ni windows, sino simplemente UNIX_GENERIC o algo similar
Probar mas sistemas unix alternativos



-Para Minix:
curses enlazar contra -lcurses y no -lncurses
Poder definir otra tecla para abrir el menu, F5 lanza comandos del sistema
Por ejemplo en driver curses defino tecla END como si fuera F5
Parece que curses no tiene soporte para eventos de ratón
setting para compilar con clang


-lightgun
*rutina de Sinclair Action Pack - Side A, del programa principal que detecta posicion y, ponerla como ejempo
en programa aparte, mostrando coordenada y en pantalla

ok-lightgun: magnum. poder tener margen de mas de 1 scanline (para el acid killer por ejemplo)
-magnun: acid killer, ver por que no funciona en mitad derecha

-config setting para aymidi_rs232_enabled.v
if (MACHINE_IS_SPECTRUM) nuevo_aymidi_rs232_handle(value); esto no tendria que ser dependiente de ese setting?
desactivado por defecto
con operation wolf de la magnum escribe muchos mensajes en consola (paranoid) aun desactivando el settting.
Es necesario tanto print?


-poder hacer que con menu abierto, se envien eventos de teclado, pistola etc a máquina emulada.
Util si estamos en debug cpu y queremos que un juego lea el boton del ratón (emulando lightgun) y/o luz de pistola
Quizá con una opción y sólo si está el foco en ventana de debug CPU



-revisar los salir_todos_menus=1 que se puedan cambiar por   menu_add_item_menu_se_cerrara( en el item de menu


-Soportar uft-8 en el footer, que sirva para texto footer normal pero tambien con opciones de --programsettingsinfo de archivos .config.
*testear con --programname



- Poder ver todos los sprites de tbblue, MSX etc de golpe, en una sola ventana



-Acción de ESCMenu en joystick, cierra todos los menús? Quizá hay que crear una acción nueva que sea menú atrás... O sirve con mover a la izquierda?


-compilar en 32 bits quiza hace que las columnas de registros modificados mas alla de 32 no funcionen
menu/menu_debug_cpu.c:2296:52: warning: left shift count >= width of type [-Wshift-count-overflow]



-en evaluación de condiciones si cumple o no, en debug cpu (texto "satisfy") no interpreta opcodes
que van precedidos por DD/FD, ejemplo:
8000h DEFB DD
8001h JR NZ,XXX

En vista de desensamblado, en 8000h aparece como jr nz,xxx pero no aparece texto de satisfy o no, por que no lo tiene como opcode valido (aunque si lo es)




-Comparar uso de cpu en x11 y cocoa. Probar con cpu en reposo o con carga

-Compilar binario universal https://developer.apple.com/documentation/apple-silicon/building-a-universal-macos-binary
->tendria que hacer compilación de cada archivo .c en dos .o, uno para cada arquitectura. Demasiado complicado.
Lo mas fácil es generar dos binarios en dos entornos diferentes (uno en Mac silicon y el otro en Mac intel - o -target x86_64 en silicon)


-Qué sentido tiene que el icono de hilow deje hacer "Switch tape inserted flag" cuando no está hilow activado?

-Probar compilar contra ssl en mac desde homebrew

-Cambiar scripts docker para usar amd64:
Ejemplo:
docker run --rm -it --platform linux/amd64 rofrano/vagrant-provider:debian bash
Alguno para arm? Aparte de raspberry...


-scanline inicial que se ve en negro en Next al pulsar teclas


######Dialogo al sobreescribir un archivo######
-Dialogo al sobreescribir un archivo (por ejemplo en tape output) si está top menu activado, sale mensaje arriba del todo
->al abrir filesel llamar a zxvision_reset_set_next_menu_position()
Pero no seria mejor llamar ahí desde otro sitio central? Desde donde se sepa que el menu se cierra
->Mejor: todo aquel que llame a filesel desde opcion de menu debe activar flag:

menu_add_item_menu_add_flags(array_menu_tape_settings,MENU_ITEM_FLAG_GENERA_VENTANA);

y también MENU_ITEM_FLAG_SE_CERRARA ? Eso corrige el problema de que el menu reaparece, al acabar de seleccionar el archivo, y fijado en la parte izquierda
Pero al cerrar, el usuario no ve que ha seleccionado ese archivo, que igual quiere activar algunas otras opciones , por ejemplo quizá despues de seleccionar un dsk, el usuario
puede querer activar el write protect y eso le implica tener que reabrir el menu (o no? quizá no necesita tocar nada despues de seleccionar el archivo)
Además si se reabre el menú puede ser confuso para el usuario, ha abierto un menu, se ha cerrado, pero reabre solo? Por no decir que pierde la posicion de la ventana de ese submenu (con MENU_ITEM_FLAG_GENERA_VENTANA)

-> de momento solo en testeo al seleccionar tape input y output (en void menu_storage_tape(MENU_ITEM_PARAMETERS) ) y en CF2 Floppy
-> estudiar los diferentes menu donde se seleccionan archivos y ver si tiene sentido que el menú se reabra después de seleccionar archivo
->otra alternativa seria convertir ese submenu en una ventana de dialogo con opciones... pero igual seria también confuso para el usuario, ¿un menu que se separa de los menus?
->Hay que revisar TODOS los que seleccionan un archivo desde item de menu
*ok todos de spectrum
-Al insertar imagenes (dsk, tap, etc) ver en que casos debería activar tambien, por ejemplo insertar hilow y habilitar hilow. Ver en que casos no es conveniente habilitar,
y quizá que salga un aviso en los casos en que no lo habilita
######FIN Dialogo al sobreescribir un archivo######


-Pantalla completa en Mac no va bien

-Botones flechas para extender zx desktop, desaparece el de extender cuando llega a 640

-Poder saber en que fecha se ha iniciado una sala de zeng online y/o indicar el uptime

-aviso al linkear en mac silicon, es importante?
ld: warning: reducing alignment of section __DATA,__common from 0x8000 to 0x4000 because it exceeds segment maximum alignment

-En Zeng si usuario envía pulsación tecla pero la liberación de tecla no llega por fallo de red, se quedará la tecla pulsada siempre
Hacer un proceso en que, si nadie pulsa una tecla (ni clientes Zeng ni el propio servidor) durante 5 minutos, que libere todas teclas

-Zeng opción para enviar mensaje a un usuario concreto

-Quiza reducir el color rojo de items de menu no seleccionables: en algunos menus es un rojo muy intenso

-Teclas que en debug cpu no están disponible en modo no-step, como rEt, quitarlas de la leyenda en modo no-step

-Copy (desde fuera de ZEsarUX) y paste dentro como spool file (pulsaciones de teclas)

-reubicar ventanas, maximizar, etc: si no hay zx desktop pero hay top menu, la primera linea no deberia usarse para ubicar ventanas (pues está el top menu)